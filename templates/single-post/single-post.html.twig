{% extends 'base.html.twig' %}

{% block title %}{{ post.title }} - Ministore{% endblock %}

{% block body %}
  {% include 'partials/svg_icons.html.twig' %}
  {% include 'partials/search_popup.html.twig' %}
  {% include 'partials/header.html.twig' %}
  
  {% include 'partials/breadcrumb.html.twig' with {
    'page_title': post.title,
    'parent_page': 'Blog',
    'parent_route': 'app_blog'
  } %}
  
  <section class="single-post-section padding-large">
    <div class="container">
      <div class="row">
        <div class="col-md-8">
          <div class="post-content">
            <div class="post-meta mb-4">
              <span class="post-date">{{  post.createdAt|date('F d, Y') }}</span>
              <span class="post-author ms-4">By <a href="#" class="text-decoration-none">{{ post.author }}</a></span>
              <span class="post-category ms-4">In <a href="{{ path('app_blog', {'category': post.category_slug}) }}" class="text-decoration-none">{{ post.category }}</a></span>
            </div>
            <div class="post-thumbnail mb-4">
              <img src="{{ asset(post.image) }}" alt="{{ post.title }}" class="img-fluid rounded">
            </div>
            <div class="post-text">
              {{ post.content|raw }}
            </div>
            
            <div class="post-tags mt-5">
              <span class="fw-bold me-2">Tags:</span>
              {% for tag in post.tags %}
                <a href="{{ path('app_blog', {'tag': tag.slug}) }}" class="btn btn-sm btn-outline-dark me-2 mb-2">{{ tag.name }}</a>
              {% endfor %}
            </div>
            
            <div class="post-share d-flex align-items-center mt-4">
              <span class="fw-bold me-3">Share:</span>
              <ul class="list-unstyled d-flex mb-0">
                <li class="me-3">
                  <a href="#" class="text-dark">
                    <svg class="facebook" width="24" height="24">
                      <use xlink:href="#facebook"></use>
                    </svg>
                  </a>
                </li>
                <li class="me-3">
                  <a href="#" class="text-dark">
                    <svg class="twitter" width="24" height="24">
                      <use xlink:href="#twitter"></use>
                    </svg>
                  </a>
                </li>
                <li class="me-3">
                  <a href="#" class="text-dark">
                    <svg class="instagram" width="24" height="24">
                      <use xlink:href="#instagram"></use>
                    </svg>
                  </a>
                </li>
              </ul>
            </div>
            
            <div class="post-navigation border-top border-bottom py-4 my-5">
              <div class="row">
                <div class="col-md-6 border-end">
                  {% if previous_post %}
                    <a href="{{ path('app_single_post', {'id': previous_post.id}) }}" class="text-decoration-none text-dark">
                      <span class="d-block text-muted small">Previous Post</span>
                      <span class="fw-medium">{{ previous_post.title }}</span>
                    </a>
                  {% endif %}
                </div>
                <div class="col-md-6 ps-md-4">
                  {% if next_post %}
                    <a href="{{ path('app_single_post', {'id': next_post.id}) }}" class="text-decoration-none text-dark">
                      <span class="d-block text-muted small">Next Post</span>
                      <span class="fw-medium">{{ next_post.title }}</span>
                    </a>
                  {% endif %}
                </div>
              </div>
            </div>
            
            <div class="comments-section mt-5">
              <h3 class="mb-4">{{ comments|length }} Comments</h3>
              <div class="comment-list">
                {% for comment in comments %}
                  <div class="comment-item d-flex mb-4 pb-4 border-bottom {% if comment.parent_id %}ms-5{% endif %}">
                    <div class="comment-author-img me-3">
                      <img src="{{ asset(comment.avatar) }}" alt="{{ comment.author }}" class="rounded-circle" width="60">
                    </div>
                    <div class="comment-body">
                      <h5 class="mb-1">{{ comment.author }}</h5>
                      <div class="comment-meta text-muted small mb-2">{{ comment.date|date('F d, Y') }} at {{ comment.date|date('g:i A') }}</div>
                      <p>{{ comment.content }}</p>
                      <a href="#" class="btn btn-sm btn-outline-dark mt-2">Reply</a>
                    </div>
                  </div>
                {% endfor %}
              </div>
              
              <div class="comment-form mt-5">
                <h3 class="mb-4">Leave a Comment</h3>
                <form>
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label for="commentName" class="form-label">Name *</label>
                      <input type="text" class="form-control" id="commentName" required>
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="commentEmail" class="form-label">Email *</label>
                      <input type="email" class="form-control" id="commentEmail" required>
                    </div>
                  </div>
                  <div class="mb-3">
                    <label for="commentWebsite" class="form-label">Website</label>
                    <input type="url" class="form-control" id="commentWebsite">
                  </div>
                  <div class="mb-3">
                    <label for="commentMessage" class="form-label">Comment *</label>
                    <textarea class="form-control" id="commentMessage" rows="5" required></textarea>
                  </div>
                  <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" id="saveInfo">
                    <label class="form-check-label" for="saveInfo">
                      Save my name, email, and website in this browser for the next time I comment.
                    </label>
                  </div>
                  <button type="submit" class="btn btn-dark">Post Comment</button>
                </form>
              </div>
            </div>
          </div>
        </div>
        
        <div class="col-md-4">
          {% include 'partials/blog_sidebar.html.twig' with {'recent_posts': recent_posts} %}
        </div>
      </div>
    </div>
  </section>
  
  {% include 'partials/subscribe.html.twig' %}
  {% include 'partials/footer.html.twig' %}
{% endblock %}